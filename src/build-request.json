{
  "kind": "build_request",
  "title": "Add user authentication with progress saving",
  "projectName": "CareerSphere",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-12",
      "text": "Implement backend user profile data model in main.mo to store student preferences, quiz results, saved career paths, and selected modules. Include stable storage for persistence across canister upgrades.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "authentication so students can save their progress and preferences"
        ]
      },
      "acceptanceCriteria": [
        "User profile type includes fields for principal ID, saved quiz results, bookmarked careers, and preference settings",
        "Profiles persist across canister upgrades using stable storage",
        "CRUD operations available for user profiles (create, read, update)"
      ]
    },
    {
      "id": "REQ-13",
      "text": "Add backend functions to save and retrieve Stream Selector quiz results, associating them with the authenticated user's principal ID",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "save their progress"
        ]
      },
      "acceptanceCriteria": [
        "Function to save quiz answers and recommended stream (Science/Commerce/Arts) for a user",
        "Function to retrieve saved quiz results by principal ID",
        "Quiz results include timestamp and selected answers"
      ]
    },
    {
      "id": "REQ-14",
      "text": "Add backend functions to save and retrieve bookmarked career paths and degree programs for authenticated users",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "save their progress and preferences"
        ]
      },
      "acceptanceCriteria": [
        "Function to bookmark a career path or degree with user principal ID",
        "Function to retrieve all bookmarked items for a user",
        "Function to remove a bookmark"
      ]
    },
    {
      "id": "REQ-15",
      "text": "Update Stream Selector Quiz page to automatically save quiz results to the backend when user completes the quiz and is authenticated via Internet Identity",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "save their progress"
        ]
      },
      "acceptanceCriteria": [
        "Quiz results are saved to backend after completion if user is logged in",
        "Show success message after saving results",
        "Handle cases where user is not authenticated with a prompt to log in"
      ]
    },
    {
      "id": "REQ-16",
      "text": "Add bookmark buttons to Career Path page cards that save selected careers to the user's profile when authenticated",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "save their progress and preferences"
        ]
      },
      "acceptanceCriteria": [
        "Bookmark icon button appears on each career card",
        "Clicking bookmark saves the career to backend and shows visual feedback",
        "Bookmarked careers display a filled bookmark icon",
        "Prompt to log in if user is not authenticated"
      ]
    },
    {
      "id": "REQ-17",
      "text": "Add bookmark buttons to Degree Finder page cards that save selected degrees to the user's profile when authenticated",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "save their progress and preferences"
        ]
      },
      "acceptanceCriteria": [
        "Bookmark icon button appears on each degree card",
        "Clicking bookmark saves the degree to backend and shows visual feedback",
        "Bookmarked degrees display a filled bookmark icon",
        "Prompt to log in if user is not authenticated"
      ]
    },
    {
      "id": "REQ-18",
      "text": "Create a new Profile/Dashboard page accessible from the navigation menu that displays the authenticated user's saved quiz results, bookmarked careers, and bookmarked degrees",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "save their progress and preferences"
        ]
      },
      "acceptanceCriteria": [
        "Profile page shows user principal ID and join date",
        "Section displaying saved Stream Selector quiz results with recommended stream",
        "Section showing bookmarked careers with links to Career Path page",
        "Section showing bookmarked degrees with links to Degree Finder page",
        "Navigation menu includes 'Profile' or 'My Progress' link",
        "Redirect to login page if user is not authenticated"
      ]
    },
    {
      "id": "REQ-19",
      "text": "Update Login page to show authentication status and provide a clear call-to-action explaining the benefits of logging in (save progress, bookmark careers, track quiz results)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "authentication so students can save their progress and preferences"
        ]
      },
      "acceptanceCriteria": [
        "Login page displays benefits of authentication in a prominent section",
        "Benefits list includes: save quiz progress, bookmark careers, track journey",
        "When authenticated, show welcome message with user's principal ID",
        "Provide logout button when authenticated"
      ]
    }
  ],
  "constraints": [
    "Use Internet Identity for authentication as implemented in useInternetIdentity.ts",
    "Maintain single-actor architecture in backend/main.mo",
    "Do not modify immutable frontend paths: useInternetIdentity.ts, useActor.ts, main.tsx, components/ui",
    "Preserve existing navigation structure and routes in App.tsx"
  ],
  "nonGoals": [
    "Implementing social media login (Facebook, Google, etc.)",
    "Adding third-party analytics tracking",
    "Creating admin dashboard or role-based access control",
    "Implementing real-time notifications or alerts",
    "Adding email verification or password reset flows"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}